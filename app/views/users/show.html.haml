= provide :my_title, "Profile"

.row
  .user-main.col-md-12
    .user-left.col-md-3
      - if @user.avatar?
        = image_tag @user.avatar, width: "300px", class: "img-responsive"
      - else
        %img.img-responsive.img-rounded(src="http://via.placeholder.com/150x150")/
      %h3= @user.name
    .user-right.col-md-9
      %p= @user.intro
      - if @user == current_user
        = link_to edit_user_path(@user) do
          %i.fas.fa-pen-square.fa-2x
      - else
        - if current_user.friend?(@user)
          %p Friend
        - elsif current_user.nobody?(@user)
          %p 已忽略
        - elsif current_user.target?(@user) || current_user.inverse_nobodys?(@user)
          %p 已提出申請
        - else
          = link_to 'Add Friend', applyings_path(target_id: @user), method: :post, class: "btn btn-primary"
    .clearfix
.row
  .portfolio-main.col-md-12
    %ul.nav.nav-tabs
      %li.active{role: "presentation"}
        = link_to 'My Post', user_path
      %li{role: "presentation"}
        = link_to "My Comment", comments_user_path
      - if @user == current_user
        %li{role: "presentation"}
          = link_to "My Collect", collections_user_path
        %li{role: "presentation"}
          = link_to "My Draft",  drafts_user_path
        %li{role: "presentation"}
          = link_to "My Friend", friends_user_path
    %table.table.table-bordered.table-hover
      %tbody
        - @posts.each do |post|
          %tr
            %td
              = link_to post.title, post_path(post)
            %td
              Post Status
            %td= post.created_at.in_time_zone('Taipei').strftime("%Y-%m-%d")
            %td
              = link_to edit_post_path(post) do
                %i.fas.fa-pencil-alt.fa-2x
              = link_to post_path(post), method: :delete, data: { confirm: "Are you sure?"} do
                %i.fas.fa-trash-alt.fa-2x
  .text-center
    = paginate @posts